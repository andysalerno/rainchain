{{~preamble}}
{{history~}}
{{#user~}}
{{user_input}}
{{~/user}}
{{#assistant~}}
<thought>
    I will use {{select 'thought_action' options=valid_actions}} because {{gen 'action_reason'}}
</thought>
<action>
    {{select 'action' options=valid_actions}}({{gen 'action_input'}})
</action>
<output>
{{await 'output'}}
</output>
<response>{{gen 'response' stop='\n</response>'}}
</response>
{{~/assistant}}